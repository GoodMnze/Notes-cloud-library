<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/605138 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1228"/>

<div>
<span><div><div><span style="font-size: 24pt; font-weight: bold;">Spring AOP（面向切面编程）</span></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">一、传统方式</span></div><div><img src="Spring AOP（面向切面编程）_files/Image.png" type="image/png" data-filename="Image.png" width="611"/></div><div><span style="background-color: rgb(255, 250, 165); font-weight: bold;-evernote-highlight:true;">存在的问题：</span></div><div><span style="font-size: 12pt;">（1）代码冗余（重复部分多）</span></div><div><span style="font-size: 12pt;">（2）方法职责不清晰（既有具体的业务代码，又有和业务无关的代码）</span></div><div><span style="font-size: 12pt;">（3）不利于后期维护（一旦要修改，所有的地方都要变动）</span></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">二、AOP能够做什么</span></div><div><span style="font-size: 12pt;">将核心业务组件和非业务组件分离，然后再通过动态代理技术将两者织入（合并）。在运行期间，运行出合并之后的结果</span></div><div><span style="font-size: 12pt;">代码说明： </span></div><div><span style="font-size: 12pt;">业务类： </span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">class </span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco; font-weight: bold;">A{</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;"> </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    public void m1(){ </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">        System.out.println(&quot;AAAAA&quot;); </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">   } </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">} </span></div></div><div><span style="font-size: 12pt;">服务类： </span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">class </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco; font-weight: bold;">B</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">{ </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    public void m2(){ </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">            System.out.println(&quot;CCCCC&quot;); </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    } </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">}</span></div></div><div><span style="font-size: 12pt;">组合成一段代码，组合后变成了一个新的类，这个类称之为代理类（Proxy） </span></div><div><span style="font-size: 12pt;">代理类：</span><span style="font-size: 12pt;">继承业务类，并实现业务方法</span> <span style="font-size: 12pt;"> </span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">class </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco; font-weight: bold;">Proxy </span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">extends</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco; font-weight: bold;">A</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">{ </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    public void m1(){ </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">            System.out.println(&quot;AAAAA&quot;); </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">            System.out.println(&quot;CCCCC&quot;); </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">    } </span></div><div><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">} </span></div></div><div><span style="font-size: 12pt;">使用一个公式来表示AOP：</span><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">业务类 + 服务类 =&gt; 代理类</span></div><div>AOP能自动生成一个代理类，代理类继承自业务类，并重写业务类的方法，在方法中将切面类 和业务的代码进行了合并。</div><div><br/></div><div><br/></div><div><span style="font-size: 16pt; font-weight: bold;">三、什么是AOP？</span></div><div><span style="font-size: 12pt;">又叫面向切面编程。是对面向对象编程的补充和完善，</span><span style="font-size: 12pt;">切面通常是一个与业务无关的类（服务类），切面在</span><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">运行时</span><span style="font-size: 12pt;">能够动态的织入到业务流程中去，这就是AOP。</span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">（1）切面（Aspect）：切面是通知和切点的结合。通知和切点共同定义了切面的全部内容。 在Spring AOP中，切面可以使用通用类（基于模式的风格） 或者在普通类中以 @AspectJ 注解来实现。</span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">（2）连接点（Join point）：指方法，在Spring AOP中，一个连接点 总是 代表一个方法的执行。 应用可能有数以千计的时机应用通知。这些时机被称为连接点。连接点是在应用执行过程中能够插入切面的一个点。这个点可以是调用方法时、抛出异常时、甚至修改一个字段时。切面代码可以利用这些点插入到应用的正常流程之中，并添加新的行为。</span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">（3）通知（Advice）：在AOP术语中，切面的工作被称为通知。</span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">    Spring切面可以应用5种类型的通知：</span></div><ol style="margin: 0px; padding: 0px 0px 0px 40px; font-size: 15px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="margin: 0px; padding: 0px; list-style: decimal;"><div><span style="font-size: 15px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">前置通知（Before）：在目标方法被调用之前调用通知功能；</span></div></li><li style="margin: 0px; padding: 0px; list-style: decimal;"><div><span style="font-size: 15px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">后置通知（After）：在目标方法完成之后调用通知，此时不会关心方法的输出是什么；</span></div></li><li style="margin: 0px; padding: 0px; list-style: decimal;"><div><span style="font-size: 15px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">返回通知（After-returning ）：在目标方法成功执行之后调用通知；</span></div></li><li style="margin: 0px; padding: 0px; list-style: decimal;"><div><span style="font-size: 15px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">异常通知（After-throwing）：在目标方法抛出异常后调用通知；</span></div></li><li style="margin: 0px; padding: 0px; list-style: decimal;"><div><span style="font-size: 15px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">环绕通知（Around）：通知包裹了被通知的方法，在被通知的方法调用之前和调用之后执行自定义的行为</span></div></li></ol><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><br/></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">（4）切入点（Pointcut）：切点的定义会匹配通知所要织入的一个或多个连接点。我们通常使用明确的类和方法名称，或是利用正则表达式定义所匹配的类和方法名称来指定这些切点。</span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 15px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 15px; color: rgb(227, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">aspect 由 pointcut 和 advice 组成，切面是通知和切点的结合</span><span style="font-size: 15px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">。 </span></span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 15px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 15px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">它既包含了横切逻辑的定义, 也包括了连接点的定义. Spring AOP 就是负责实施切面的框架, 它将切面所定义的横切逻辑编织到切面所指定的连接点中.</span></span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 15px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">（5）引入（Introduction）：引入允许我们向现有类添加新方法或属性。</span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">（6）目标对象（Target Object）： 被一个或者多个切面（aspect）所通知（advise）的对象。它通常是一个代理对象。也有人把它叫做 被通知（adviced） 对象。 既然Spring AOP是通过运行时代理实现的，这个对象永远是一个 被代理（proxied） 对象。</span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">（7）织入（Weaving）：织入是把切面应用到目标对象并创建新的代理对象的过程。在目标对象的生命周期里有多少个点可以进行织入：（即切面与业务合并的过程）</span></div><ul style="margin: 0px 0px 0px 30px; padding: 0px; font-size: 15px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="margin: 0px; padding: 0px; list-style: disc;"><div><span style="font-size: 15px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">编译期：切面在目标类编译时被织入。AspectJ的织入编译器是以这种方式织入切面的。</span></div></li><li style="margin: 0px; padding: 0px; list-style: disc;"><div><span style="font-size: 15px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">类加载期：切面在目标类加载到JVM时被织入。需要特殊的类加载器，它可以在目标类被引入应用之前增强该目标类的字节码。AspectJ5的加载时织入就支持以这种方式织入切面。</span></div></li><li style="margin: 0px; padding: 0px; list-style: disc;"><div><span style="font-size: 15px; color: rgb(34, 34, 34); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">运行期：切面在应用运行的某个时刻被织入。一般情况下，在织入切面时，AOP容器会为目标对象动态地创建一个代理对象。SpringAOP就是以这种方式织入切面。</span></div></li></ul><div><span style="font-size: 12pt; font-weight: bold;">G、代理（Proxy） </span></div><div><span style="font-size: 12pt;">    Proxy = Aspect + Target</span></div><div><br style="font-size: 12pt;"/></div><div><span style="font-size: 16pt; font-weight: bold;">四、Spring中实现AOP</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">（一）准备工作</span></div><div><span style="font-size: 12pt;">   1、在pom.xml中导入spring-aspect依赖库</span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 10pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">&lt;!--s</span><span style="font-size: 10pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">导入</span><span style="font-size: 10pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">spring</span><span style="font-size: 10pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">的</span><span style="font-size: 10pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">aspects</span><span style="font-size: 10pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">依赖。版本必须和</span><span style="font-size: 10pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">Spring</span><span style="font-size: 10pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">核心版本是一致的</span><span style="font-size: 10pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">--&gt;</span></div><div><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(51, 51, 51); font-family: Monaco;">&lt;</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">dependency</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(51, 51, 51); font-family: Monaco;">&gt;</span></div><div><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(51, 51, 51); font-family: Monaco;">&lt;</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">groupId</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(51, 51, 51); font-family: Monaco;">&gt;</span><span style="font-size: 10pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">org.springframework</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(51, 51, 51); font-family: Monaco;">&lt;/</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">groupId</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(51, 51, 51); font-family: Monaco;">&gt;</span></div><div><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(51, 51, 51); font-family: Monaco;">&lt;</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">artifactId</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(51, 51, 51); font-family: Monaco;">&gt;</span><span style="font-size: 10pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">spring-aspects</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(51, 51, 51); font-family: Monaco;">&lt;/</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">artifactId</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(51, 51, 51); font-family: Monaco;">&gt;</span></div><div><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(51, 51, 51); font-family: Monaco;">&lt;</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">version</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(51, 51, 51); font-family: Monaco;">&gt;</span><span style="font-size: 10pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">5.1.1.RELEASE</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(51, 51, 51); font-family: Monaco;">&lt;/</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">version</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(51, 51, 51); font-family: Monaco;">&gt;</span></div><div><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(51, 51, 51); font-family: Monaco;">&lt;/</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">dependency</span><span style="font-size: 10pt; background-color: rgb(239, 239, 239); color: rgb(51, 51, 51); font-family: Monaco;">&gt;</span></div></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">2、execution表达式</span></div><div>    <span style="font-size: 12pt;">【语法】[修饰符] 返回类型 包名.类名.方法名(参数列表) [throws 异常列表]</span></div><div><span style="font-size: 12pt;">            *——代表任意字符</span></div><div><span style="font-size: 12pt;">            ..——任意参数/子包             </span></div><div><span style="font-size: 12pt;">    【举例】</span></div><div><span style="font-size: 12pt;">        （1）execution(* a.b.c.mm(..))</span></div><div><span style="font-size: 12pt;">                a.b包下面的c类的任意返回类型的mm方法</span></div><div><span style="font-size: 12pt;">        （2）execution(int a.b.c.*(..))</span></div><div><span style="font-size: 12pt;">                a.b包下面的c类中返回类型为int的任意方法</span></div><div><span style="font-size: 12pt;">        （3）execution(* a.b.*.done*(..))</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">（二）XML配置方式</span></div><div><span style="font-size: 10pt;">1、准备好业务类</span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">public class</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">MyServices {</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">    public</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">List selectAll(){</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">        System.</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(102, 14, 122); font-family: Monaco; font-style: italic; font-weight: bold;">out</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">.println(</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">正在执行查询所有的方法</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">selectAll....&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">        return null</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">    }</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">    public</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">Integer doInsert(Integer id,String name){</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">        System.</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(102, 14, 122); font-family: Monaco; font-style: italic; font-weight: bold;">out</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">.println(</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">正在执行新增操作</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">doInsert********&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">        return</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 255); font-family: Monaco;">1</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">    }</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">    public</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">Boolean doUpdate(Integer id,String name){</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">        System.</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(102, 14, 122); font-family: Monaco; font-style: italic; font-weight: bold;">out</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">.println(</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">正在执行修改操作</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">doUpdate%%%%%%%%&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">        return false</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">    }</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">    public</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">Boolean doDelete(Integer id){</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">        try</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">{</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">            Thread.</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco; font-style: italic;">sleep</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">(</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 255); font-family: Monaco;">1000</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">);</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: Monaco; font-style: italic;">//</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: 宋体; font-style: italic;">模拟方法执行的时长</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">        }</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">catch</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">(InterruptedException e) {</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">            e.printStackTrace();</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">        }</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">        System.</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(102, 14, 122); font-family: Monaco; font-style: italic; font-weight: bold;">out</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">.println(</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">正在执行删除操作</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">doUpdate@@@@@@@@@@@@&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">        return false</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">    }</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">}</span></div><div><br/></div></div><div><a href="Spring AOP（面向切面编程）_files/MyServices.java"><img src="Spring AOP（面向切面编程）_files/5f4e908c76eefee430aac176c9d697d3.png" alt="MyServices.java"></a></div><div><br/></div><div>2、准备切面类（和业务无关，但是重复程度比较高的代码，整合成一个切面类）</div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco; font-style: italic;">/*</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: 宋体; font-style: italic;">定义服务类（切面类）</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco; font-style: italic;">1</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: 宋体; font-style: italic;">、置前通知方法</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco; font-style: italic;">2</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: 宋体; font-style: italic;">、置后通知方法</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco; font-style: italic;">3</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: 宋体; font-style: italic;">、环绕通知方法</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco; font-style: italic;">* @author SMILE.Huang</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco; font-style: italic;">* @date 2020-07-14 9:35</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco; font-style: italic;">*/</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">public class</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">MyAspects {</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">    public void</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">before(){</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">        System.</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(102, 14, 122); font-family: Monaco; font-style: italic; font-weight: bold;">out</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">.println(</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">我是切面类中的前置通知</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">Before Advice</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">！！！！</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">    }</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">    public void</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">after(){</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">        System.</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(102, 14, 122); font-family: Monaco; font-style: italic; font-weight: bold;">out</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">.println(</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">！！！！！！！我是切面类中的置后通知</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">After Advice&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">    }</span></div><div style="text-align: center; font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">    public void</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">around(ProceedingJoinPoint jp){</span></div><div style="font-size: 9pt;"><br style="font-family: Monaco; font-size: 9pt; color: rgb(130, 76, 6);"/></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">        System.</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(102, 14, 122); font-family: Monaco; font-style: italic; font-weight: bold;">out</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">.println(</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">开启环绕通知模式：</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">        Long begin = System.</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco; font-style: italic;">currentTimeMillis</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">();</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: Monaco; font-style: italic;">//</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: 宋体; font-style: italic;">记录方法开始的时间戳</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">        try</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">{</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">            Object obj = jp.proceed();</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: Monaco; font-style: italic;">//</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: 宋体; font-style: italic;">开始调用业务方法</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: Monaco; font-style: italic;">            //obj</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: 宋体; font-style: italic;">表示业务类的返回类型</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">        }</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">catch</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">(Throwable throwable) {</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">            throwable.printStackTrace();</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">        }</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">        Long end = System.</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco; font-style: italic;">currentTimeMillis</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">();</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">        System.</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(102, 14, 122); font-family: Monaco; font-style: italic; font-weight: bold;">out</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">.println(</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">环绕通知模式结束，</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">+</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">                    &quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">该方法总共花费时长为：</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">+(end-begin)+</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">毫秒</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">    }</span></div><div style="font-size: 9pt;"><br/></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">}</span></div><div><br/></div></div><div><a href="Spring AOP（面向切面编程）_files/MyAspects.java"><img src="Spring AOP（面向切面编程）_files/9e21c6d9feb6696dd6bcd76687f111ba.png" alt="MyAspects.java"></a></div><div><br/></div><div><span style="font-size: 10pt;">3、配置核心配置文件</span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902);"><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">&lt;!--</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">创建业务类</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">Bean</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">对象</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">--&gt;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; font-family: &quot;Courier New&quot;;">&lt;</span><span style="font-size: 9pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">bean</span> <span style="font-size: 9pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-weight: bold;">id</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">=&quot;service&quot;</span> <span style="font-size: 9pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-weight: bold;">class</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">=&quot;com.study.aop.MyServices&quot;</span><span style="font-size: 9pt; font-family: &quot;Courier New&quot;;">/&gt;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">&lt;!--</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">创建切面类</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">Bean</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">对象</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">--&gt;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; font-family: &quot;Courier New&quot;;">&lt;</span><span style="font-size: 9pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">bean</span> <span style="font-size: 9pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-weight: bold;">id</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">=&quot;</span><span style="font-size: 9pt; background-color: rgb(255, 250, 165); color: rgb(227, 0, 0); font-family: &quot;Courier New&quot;; font-weight: bold;-evernote-highlight:true;">aspects</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">&quot;</span> <span style="font-size: 9pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-weight: bold;">class</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">=&quot;com.study.aop.MyAspects&quot;</span><span style="font-size: 9pt; font-family: &quot;Courier New&quot;;">/&gt;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">&lt;!--</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">利用</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">AOP</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">技术，完成织入过程</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">--&gt;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; font-family: &quot;Courier New&quot;;">&lt;</span><span style="font-size: 9pt; color: rgb(102, 14, 122); font-family: &quot;Courier New&quot;; font-weight: bold;">aop</span><span style="font-size: 9pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">:config</span><span style="font-size: 9pt; font-family: &quot;Courier New&quot;;">&gt;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">    &lt;!--</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">定义切入点，用于筛选业务类中的方法</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">--&gt;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; font-family: &quot;Courier New&quot;;">    &lt;</span><span style="font-size: 9pt; color: rgb(102, 14, 122); font-family: &quot;Courier New&quot;; font-weight: bold;">aop</span><span style="font-size: 9pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">:pointcut</span> <span style="font-size: 9pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-weight: bold;">id</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">=&quot;</span><span style="font-size: 9pt; background-color: rgb(255, 250, 165); color: rgb(65, 173, 28); font-family: &quot;Courier New&quot;; font-weight: bold;-evernote-highlight:true;">cut</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">&quot;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-weight: bold;">              expression</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">=&quot;execution(* com.study.aop.MyServices.do*(..))&quot;</span><span style="font-size: 9pt; font-family: &quot;Courier New&quot;;">/&gt;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">    &lt;!--</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">定义切面</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">--&gt;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; font-family: &quot;Courier New&quot;;">    &lt;</span><span style="font-size: 9pt; color: rgb(102, 14, 122); font-family: &quot;Courier New&quot;; font-weight: bold;">aop</span><span style="font-size: 9pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">:aspect</span> <span style="font-size: 9pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-weight: bold;">ref</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">=&quot;</span><span style="font-size: 9pt; background-color: rgb(255, 250, 165); color: rgb(227, 0, 0); font-family: &quot;Courier New&quot;; font-weight: bold;-evernote-highlight:true;">aspects</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">&quot;</span><span style="font-size: 9pt; font-family: &quot;Courier New&quot;;">&gt;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">        &lt;!--</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">定义连接点</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">,</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">组合完成织入操作。</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">            置前通知，在切入点</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">cut</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">筛选的方法前，切入通知</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">before</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">            &lt;aop:before method=&quot;before&quot; pointcut-ref=&quot;</span><span style="font-size: 9pt; background-color: rgb(255, 250, 165); color: rgb(77, 206, 29); font-family: &quot;Courier New&quot;;-evernote-highlight:true;">cut</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">&quot;/&gt;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">            &lt;aop:after method=&quot;before&quot; pointcut-ref=&quot;cut&quot;/&gt;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">        --&gt;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; font-family: &quot;Courier New&quot;;">    &lt;</span><span style="font-size: 9pt; color: rgb(102, 14, 122); font-family: &quot;Courier New&quot;; font-weight: bold;">aop</span><span style="font-size: 9pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">:around</span> <span style="font-size: 9pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-weight: bold;">method</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">=&quot;around&quot;</span> <span style="font-size: 9pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-weight: bold;">pointcut-ref</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">=&quot;</span><span style="font-size: 9pt; background-color: rgb(255, 250, 165); color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;-evernote-highlight:true;">cut</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">&quot;</span><span style="font-size: 9pt; font-family: &quot;Courier New&quot;;">/&gt;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; font-family: &quot;Courier New&quot;;">&lt;/</span><span style="font-size: 9pt; color: rgb(102, 14, 122); font-family: &quot;Courier New&quot;; font-weight: bold;">aop</span><span style="font-size: 9pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">:aspect</span><span style="font-size: 9pt; font-family: &quot;Courier New&quot;;">&gt;</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; font-family: &quot;Courier New&quot;;">&lt;/</span><span style="font-size: 9pt; color: rgb(102, 14, 122); font-family: &quot;Courier New&quot;; font-weight: bold;">aop</span><span style="font-size: 9pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">:config</span><span style="font-size: 9pt; font-family: &quot;Courier New&quot;;">&gt;</span></div><div><br/></div></div><div><a href="Spring AOP（面向切面编程）_files/applicationContext_aop.xml"><img src="Spring AOP（面向切面编程）_files/37fc2aa2974f59b4d3c984ab2197de32.png" alt="applicationContext_aop.xml"></a></div><div><br/></div><div><span style="font-size: 10pt;">4、定义测试类查看结果</span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902);"><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(4, 128, 74); font-family: Monaco;">//1</span><span style="font-size: 9pt; background-color: rgb(255, 255, 255); color: rgb(4, 128, 74); font-family: 宋体;">、读取配置文件</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">ApplicationContext cla =</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">        new</span> <span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">ClassPathXmlApplicationContext(</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;applicationContext_aop.xml&quot;</span><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: Monaco;">//2</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: 宋体;">、获取</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: Monaco;">Bean</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: 宋体;">对象</span> <span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: Monaco;">MyServices</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">MyServices y =cla.getBean(</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;service&quot;</span><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">,MyServices.</span><span style="font-size: 9pt; color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">class</span><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: Monaco;">//3</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: 宋体;">、调用方法</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">y.doUpdate(</span><span style="font-size: 9pt; color: rgb(0, 0, 255); font-family: Monaco;">99999</span><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">,</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;xiaoA&quot;</span><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">System.</span><span style="font-size: 9pt; color: rgb(102, 14, 122); font-family: Monaco; font-weight: bold;">out</span><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">.println(</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;——————————————————————————————————&quot;</span><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">y.doInsert(</span><span style="font-size: 9pt; color: rgb(0, 0, 255); font-family: Monaco;">123</span><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">,</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">新增啊</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">System.</span><span style="font-size: 9pt; color: rgb(102, 14, 122); font-family: Monaco; font-weight: bold;">out</span><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">.println(</span><span style="font-size: 9pt; color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;——————————————————————————————————————&quot;</span><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">y.selectAll();</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: Monaco;">//</span><span style="font-size: 9pt; color: rgb(4, 128, 74); font-family: 宋体;">没有切入任何通知</span></div><div><br/></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">（三）自动代理+注解方式</span></div><div><br/></div><div><span style="font-size: 12pt;">1、定义业务类</span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">/* 0</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: 宋体;">配置</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">+</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: 宋体;">注解方式的业务类案例代码</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">* @author SMILE.Huang</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">* @date 2020-07-14 11:09</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">*/</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(227, 0, 0); font-family: Monaco; font-weight: bold;">@Service</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">public class</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">YouService {</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">    public void</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">work(){</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">        System.</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(102, 14, 122); font-family: Monaco; font-weight: bold;">out</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">.println(</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">坐在办公室吹着空调开着音乐，开心的工作着。。。。</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">    }</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">    public void</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">sleep(){</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">        System.</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(102, 14, 122); font-family: Monaco; font-weight: bold;">out</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">.println(</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">躺在自己的小窝里，刷着视频吃着零食，惬意的休息着</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">...&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">    }</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">    public void</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">study(){</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">        System.</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(102, 14, 122); font-family: Monaco; font-weight: bold;">out</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">.println(</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">坐在教室里敲着代码听着催眠曲，苦逼的写着作业</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">.....&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">    }</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: Monaco;">}</span></div><div><br/></div></div><div><a href="Spring AOP（面向切面编程）_files/YouService.java"><img src="Spring AOP（面向切面编程）_files/3f715d9f4238aae57954a09889fdecff.png" alt="YouService.java"></a></div><div><br/></div><div><span style="font-size: 12pt;">2、定义切面类</span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902);"><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(128, 128, 0); font-family: &quot;Courier New&quot;;">@Component</span></div><div><span style="background-color: rgb(255, 250, 165); font-size: 12pt; color: rgb(227, 0, 0); font-family: &quot;Courier New&quot;; font-weight: bold;-evernote-highlight:true;">@Aspect</span> <span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">//</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: 宋体;">定义它是切面类</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">public class</span> <span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">YouAspects {</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">    /*</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: 宋体;">定义切入点，用于筛选业务类的方法</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">*/</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(128, 128, 0); font-family: &quot;Courier New&quot;;">    @Pointcut</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">(value =</span> <span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">&quot;execution(* com.study.aop.YouService.sleep(..))&quot;</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">)</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">    public void</span> <span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196); font-family: &quot;Courier New&quot;;">cut()</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">{}</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><br style="font-family: Courier New; color: rgb(130, 76, 6);"/></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(128, 128, 0); font-family: &quot;Courier New&quot;;">    @Before</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">(</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">&quot;</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(166, 0, 196); font-family: &quot;Courier New&quot;; font-weight: bold;">cut()</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">&quot;</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">)</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">//cut</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: 宋体;">方法此时表示切入点对象</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">    public void</span> <span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">before(){</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">            System.</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(102, 14, 122); font-family: &quot;Courier New&quot;; font-weight: bold;">out</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">.println(</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">&quot;</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">这是一个置前通知，你看，后面就要调用</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">sleep</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">方法了</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">...&quot;</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">);</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">    }</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><br style="font-family: Courier New; color: rgb(130, 76, 6);"/></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(128, 128, 0); font-family: &quot;Courier New&quot;;">    @After</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">(</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">&quot;cut()&quot;</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">)</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">//cut</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: 宋体;">方法此时表示切入点对象</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">    public void</span> <span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">aaa(){</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">        System.</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(102, 14, 122); font-family: &quot;Courier New&quot;; font-weight: bold;">out</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">.println(</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">&quot;</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">这是一个置后通知</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">&quot;</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">);</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">    }</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><br style="font-family: Courier New; color: rgb(130, 76, 6);"/></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><br style="font-family: Courier New; color: rgb(130, 76, 6);"/></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(128, 128, 0); font-family: &quot;Courier New&quot;;">    </span><span style="font-size: 12px; background-color: rgb(251, 250, 248); font-family: &quot;Courier New&quot;; font-weight: bold;">@Around</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); font-family: &quot;Courier New&quot;; font-weight: bold;">(value =</span> <span style="font-size: 12px; background-color: rgb(251, 250, 248); font-family: &quot;Courier New&quot;; font-weight: bold;">&quot;execution(* com.study.aop.YouService.work(..))&quot;</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); font-family: &quot;Courier New&quot;; font-weight: bold;">)</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">    public void</span> <span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">around(ProceedingJoinPoint jp){</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">        SimpleDateFormat sdf =</span> <span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">new</span> <span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">SimpleDateFormat(</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">);</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">        String d = sdf.format(</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">new</span> <span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">Date());</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">        System.</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(102, 14, 122); font-family: &quot;Courier New&quot;; font-weight: bold;">out</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">.println(</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">&quot;</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">开启日志记录，当前时间：</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">&quot;</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">+d);</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">        Object obj=</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">null</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">;</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">        try</span> <span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">{</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">            obj = jp.proceed();</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">//</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: 宋体;">开始调用业务方法</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">        }</span> <span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">catch</span> <span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">(Throwable throwable) {</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">            throwable.printStackTrace();</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">        }</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">        System.</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(102, 14, 122); font-family: &quot;Courier New&quot;; font-weight: bold;">out</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">.println(</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">&quot;</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: 宋体; font-weight: bold;">日志结束，方法的返回值是：</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">&quot;</span><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">+obj);</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">    }</span></div><div style="font-size: 12px; background-color: rgb(251, 250, 248);"><span style="font-size: 12px; background-color: rgb(251, 250, 248); color: rgb(130, 76, 6); font-family: &quot;Courier New&quot;;">}</span></div><div><br/></div></div><div><a href="Spring AOP（面向切面编程）_files/YouAspects.java"><img src="Spring AOP（面向切面编程）_files/611f0c8ad4d51b016cd7a0aabc0525f4.png" alt="YouAspects.java"></a></div><div><span style="font-size: 12pt;">3、配置文件</span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(255, 255, 255); font-size: 10pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">&lt;!--</span> <span style="background-color: rgb(255, 255, 255); font-size: 10pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">零配置扫描器</span><span style="background-color: rgb(255, 255, 255); font-size: 10pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">--&gt;</span></div><div><span style="font-size: 10pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;;">&lt;</span><span style="font-size: 10pt; color: rgb(102, 14, 122); font-family: &quot;Courier New&quot;; font-weight: bold;">context</span><span style="font-size: 10pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;; font-weight: bold;">:component-scan</span> <span style="font-size: 10pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-weight: bold;">base-package</span><span style="font-size: 10pt; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">=&quot;com.study.aop&quot;</span><span style="font-size: 10pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;;">/&gt;</span></div><div><span style="font-size: 10pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">&lt;!--</span> <span style="font-size: 10pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">自动代理切入模式，需要结合注解一起使用</span><span style="font-size: 10pt; color: rgb(4, 128, 74); font-family: &quot;Courier New&quot;;">--&gt;</span></div><div><span style="font-size: 10pt; color: rgb(227, 0, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">&lt;</span><span style="font-size: 10pt; color: rgb(227, 0, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">aop</span><span style="font-size: 10pt; color: rgb(227, 0, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">:aspectj-autoproxy</span><span style="font-size: 10pt; color: rgb(227, 0, 0); font-family: &quot;Courier New&quot;; font-weight: bold;">/&gt;</span></div></div><div><a href="Spring AOP（面向切面编程）_files/applicationContext_aop0.xml"><img src="Spring AOP（面向切面编程）_files/baaf6dd13abf365f5280de25c11e994a.png" alt="applicationContext_aop0.xml"></a></div><div><span style="font-size: 12pt;">4、测试类</span></div><div style="box-sizing: border-box; padding: 8px; font-size: 12px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: Monaco;">//1</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: 宋体;">、读取配置文件</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">ApplicationContext cla =</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">new</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">ClassPathXmlApplicationContext(</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;applicationContext_aop0.xml&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: Monaco;">//2</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: 宋体;">、获取</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: Monaco;">Bean</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: 宋体;">对象</span> <span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: Monaco;">YouService</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">YouService y =cla.getBean(YouService.</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 0, 128); font-family: Monaco; font-weight: bold;">class</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: Monaco;">//3</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: 宋体;">、调用方法</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">y.work();</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: Monaco;">//</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: 宋体;">环绕</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">System.</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(102, 14, 122); font-family: Monaco; font-weight: bold;">out</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">.println(</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(0, 128, 0); font-family: Monaco; font-weight: bold;">&quot;_____________________________&quot;</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">);</span></div><div style="font-size: 9pt;"><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(51, 51, 51); font-family: Monaco;">y.sleep();</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: Monaco;">//</span><span style="font-size: 9pt; background-color: rgb(251, 250, 248); color: rgb(4, 128, 74); font-family: 宋体;">置前</span></div></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">五、总结</span></div><div>A、AOP的理解 </div><div>B、AOP的7个概念 </div><div>        Aspect  切面  </div><div>        Advice  通知 </div><div><br/></div><div>        Target  目标对象 </div><div>        JoinPoint 连接点 </div><div>        Pointcut  切入点 </div><div>        Weaving 织入 </div><div>        Proxy  代理 </div><div><br/></div><div>C、execution表达式 </div><div>D、Spring AOP的两种实现（注解和XML）</div><div><br/></div></div><div><br/></div></span>
</div></body></html> 